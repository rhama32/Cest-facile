<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-12">
      <h3 class="mt-3 text-center"><b><%= @customer.full_name %>さんの投稿詳細</b></h3>
        <h5 class="mt-3 text-center" id="favorite_buttons_<%= @review.id %>">
          <%= render "public/favorites/favorites", review: @review %>
        </h5>
    </div>
    <div class="col-md-8">
      <table class="mt-4 table table-hover shadow">
        <tbody>
          <tr>
            <td class="nowrap">病院名</td>
            <th class="nowrap"><%= @review.hospital.name %></th>
          </tr>
          <tr>
            <td class="nowrap">投稿日</td>
            <th class="nowrap"><%= @review.created_at.strftime("%Y年 %m月 %d日") %></th>
          </tr>
          <tr>
            <td class="nowrap">診療の満足度</td>
            <th><%= @review.doctor_satisfaction %>/5点</th>
          </tr>
          <tr>
            <td class="nowrap">院内の清潔さ</td>
            <th><%= @review.room_clean %>/5点</th>            
          </tr>
          <tr>
            <td class="nowrap">スタッフの対応満足度</td>
            <th><%= @review.staff_satisfaction %>/5点</th>
          </tr>
          <tr>
            <td class="nowrap">待ち時間（分）</td>
            <th><%= @review.waiting_time %>分</th>           
          </tr>
          <tr>
            <td class="nowrap">総合満足度</td>
            <th><%= @review.total_point %>/5点</th>            
          </tr>
          <tr>
            <td class="nowrap">コメント</td>
            <th><%= @review.comment %></th>            
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-8">
      <h4><b>＜コメント欄＞</b></h4>
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>投稿者名</th>
              <th>コメント</th>
              <th>投稿日時</th>
              <th>削除</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><%= @review.customer.full_name %></td>
              <td><%= @review.comment %></td>
              <td><%= @review.created_at.strftime("%Y年 %m月 %d日 %H:%M") %></td>
              <td><%= link_to '削除', public_review_path(@review), method: :delete, remote: true, data: { confirm: "コメントを削除しても宜しいですか？" }, class: "btn btn-danger" %></td>
            </tr>
            <% @replies.each do |reply| %>
              <tr>
                <% if reply.doctor_id.present? %>
                  <td><%= reply.doctor.name %></td>
                <% elsif reply.customer_id.present? %>
                  <td><%= reply.customer.full_name %></td>
                <% end %>
                  <td><%= reply.comment %></td>
                  <td><%= @review.created_at.strftime("%Y年 %m月 %d日 %H:%M") %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <div id="comments-area"><%= render "public/review_comments/comment", review: @review, reply: @reply %>
        <%= link_to 'レビュー投稿一覧に戻る', public_reviews_path, class: "mt-4 btn btn-primary rounded-pill ml-5" %>
        </div>
    </div>
  </div>
</div>